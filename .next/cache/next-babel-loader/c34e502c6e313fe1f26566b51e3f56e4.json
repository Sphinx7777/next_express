{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router';\nimport { postsApi } from '../src/api/api';\nimport { Form } from '../src/Components/form';\nimport { Button } from '../src/Components/Button';\n\nvar View = function View(props) {\n  var _useState = useState(props.post),\n      post = _useState[0],\n      setPost = _useState[1];\n\n  var _useState2 = useState(false),\n      showForm = _useState2[0],\n      setToogleSowForm = _useState2[1];\n\n  var isAutor = true;\n\n  var toogleShowForm = function toogleShowForm() {\n    setToogleSowForm(!showForm);\n  };\n\n  var deletePost = function deletePost(id) {\n    return _regeneratorRuntime.async(function deletePost$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(postsApi.dellPost(id));\n\n          case 2:\n            setPost('Пост был удален');\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var updatePost = function updatePost(data) {\n    var response;\n    return _regeneratorRuntime.async(function updatePost$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(postsApi.updatePost(data));\n\n          case 2:\n            response = _context2.sent;\n            setPost(response);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-816264230\"\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: \"jsx-816264230\"\n  }, \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\")), __jsx(Link, {\n    href: \"/posts\"\n  }, __jsx(\"a\", {\n    className: \"jsx-816264230\"\n  }, \"\\u041F\\u043E\\u0441\\u0442\\u044B\")), typeof post === 'object' ? __jsx(\"div\", {\n    className: \"jsx-816264230\"\n  }, __jsx(\"p\", {\n    className: \"jsx-816264230\"\n  }, post.title), __jsx(\"p\", {\n    className: \"jsx-816264230\"\n  }, post.autor), __jsx(\"p\", {\n    className: \"jsx-816264230\"\n  }, post.description)) : __jsx(\"p\", {\n    className: \"jsx-816264230\"\n  }, post), isAutor && __jsx(\"div\", {\n    className: \"jsx-816264230\"\n  }, __jsx(Button, {\n    disabled: typeof post !== 'object',\n    onClick: function onClick() {\n      return deletePost(post._id);\n    }\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"), __jsx(Button, {\n    onClick: toogleShowForm\n  }, !showForm ? 'Изменить' : 'Отменить')), showForm && __jsx(Form, {\n    newPost: updatePost,\n    id: post._id,\n    autor: \"\\u0412\\u0430\\u0441\\u044F \\u041F\\u0443\\u043F\\u043A\\u0438\\u043D\"\n  }), __jsx(_JSXStyle, {\n    id: \"816264230\"\n  }, \"a.jsx-816264230{-webkit-text-decoration:none;text-decoration:none;color:blue;margin-right:5px;}a.jsx-816264230:hover{opacity:0.6;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxOZXh0XFxuZXh0X2V4cHJlc3NcXHBhZ2VzXFx2aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZEWSxBQUl3QixBQUtULFlBQ2Qsc0NBTGEsV0FDTSxpQkFDbkIiLCJmaWxlIjoiRDpcXE5leHRcXG5leHRfZXhwcmVzc1xccGFnZXNcXHZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXHJcbmltcG9ydCBSb3V0ZXIsIHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5pbXBvcnQgeyBwb3N0c0FwaSB9IGZyb20gJy4uL3NyYy9hcGkvYXBpJztcclxuaW1wb3J0IHsgRm9ybSB9IGZyb20gJy4uL3NyYy9Db21wb25lbnRzL2Zvcm0nO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi9zcmMvQ29tcG9uZW50cy9CdXR0b24nO1xyXG5cclxuY29uc3QgVmlldyA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgW3Bvc3QsIHNldFBvc3RdID0gdXNlU3RhdGUocHJvcHMucG9zdClcclxuICAgIGNvbnN0IFtzaG93Rm9ybSwgc2V0VG9vZ2xlU293Rm9ybV0gPSB1c2VTdGF0ZShmYWxzZSlcclxuICAgIGNvbnN0IGlzQXV0b3IgPSB0cnVlXHJcblxyXG4gICAgY29uc3QgdG9vZ2xlU2hvd0Zvcm0gPSAoKSA9PiB7XHJcbiAgICAgICAgc2V0VG9vZ2xlU293Rm9ybSghc2hvd0Zvcm0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IGRlbGV0ZVBvc3QgPSBhc3luYyAoaWQpID0+IHtcclxuICAgICAgICBhd2FpdCBwb3N0c0FwaS5kZWxsUG9zdChpZClcclxuICAgICAgICBzZXRQb3N0KCfQn9C+0YHRgiDQsdGL0Lsg0YPQtNCw0LvQtdC9JylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKGRhdGEpID0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHBvc3RzQXBpLnVwZGF0ZVBvc3QoZGF0YSlcclxuICAgICAgICBzZXRQb3N0KHJlc3BvbnNlKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9cIj5cclxuICAgICAgICAgICAgICAgIDxhPtCT0LvQsNCy0L3QsNGPPC9hPlxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgIDxMaW5rIGhyZWY9Jy9wb3N0cyc+XHJcbiAgICAgICAgICAgICAgICA8YT7Qn9C+0YHRgtGLPC9hPlxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICh0eXBlb2YgcG9zdCA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgP1xyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntwb3N0LnRpdGxlfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3Bvc3QuYXV0b3J9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57cG9zdC5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgOiA8cD57cG9zdH08L3A+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaXNBdXRvciAmJiA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3R5cGVvZiBwb3N0ICE9PSAnb2JqZWN0J31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZGVsZXRlUG9zdChwb3N0Ll9pZCl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICDQo9C00LDQu9C40YLRjFxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dG9vZ2xlU2hvd0Zvcm19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IXNob3dGb3JtID8gJ9CY0LfQvNC10L3QuNGC0YwnIDogJ9Ce0YLQvNC10L3QuNGC0YwnfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2hvd0Zvcm0gJiYgPEZvcm0gbmV3UG9zdD17dXBkYXRlUG9zdH0gaWQ9e3Bvc3QuX2lkfSBhdXRvcj0n0JLQsNGB0Y8g0J/Rg9C/0LrQuNC9JyAvPlxyXG4gICAgICAgICAgICB9XHJcbjxzdHlsZSBqc3g+e2BcclxuXHJcbmEge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBjb2xvcjogYmx1ZTtcclxuICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG5hOmhvdmVyIHtcclxuICBvcGFjaXR5OiAwLjY7XHJcbn1cclxuYH08L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG59XHJcblZpZXcuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgKGNvbnRleHQpID0+IHtcclxuICAgIHJldHVybiB7IHBvc3Q6IGNvbnRleHQucXVlcnkucG9zdCB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihWaWV3KTsgICAgIl19 */\\n/*@ sourceURL=D:\\\\\\\\Next\\\\\\\\next_express\\\\\\\\pages\\\\\\\\view.js */\"));\n};\n\nView.getInitialProps = function _callee(context) {\n  return _regeneratorRuntime.async(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          return _context3.abrupt(\"return\", {\n            post: context.query.post\n          });\n\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n\nexport default withRouter(View);","map":{"version":3,"sources":["D:/Next/next_express/pages/view.js"],"names":["React","useState","useEffect","Link","Router","withRouter","postsApi","Form","Button","View","props","post","setPost","showForm","setToogleSowForm","isAutor","toogleShowForm","deletePost","id","dellPost","updatePost","data","response","title","autor","description","_id","getInitialProps","context","query"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,IAAiBC,UAAjB,QAAmC,aAAnC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,IAAT,QAAqB,wBAArB;AACA,SAASC,MAAT,QAAuB,0BAAvB;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AAAA,kBACIT,QAAQ,CAACS,KAAK,CAACC,IAAP,CADZ;AAAA,MACbA,IADa;AAAA,MACPC,OADO;;AAAA,mBAEiBX,QAAQ,CAAC,KAAD,CAFzB;AAAA,MAEbY,QAFa;AAAA,MAEHC,gBAFG;;AAGpB,MAAMC,OAAO,GAAG,IAAhB;;AAEA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AACzBF,IAAAA,gBAAgB,CAAC,CAACD,QAAF,CAAhB;AACH,GAFD;;AAKA,MAAMI,UAAU,GAAG,SAAbA,UAAa,CAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACTZ,QAAQ,CAACa,QAAT,CAAkBD,EAAlB,CADS;;AAAA;AAEfN,YAAAA,OAAO,CAAC,iBAAD,CAAP;;AAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAKA,MAAMQ,UAAU,GAAG,SAAbA,UAAa,CAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACQf,QAAQ,CAACc,UAAT,CAAoBC,IAApB,CADR;;AAAA;AACTC,YAAAA,QADS;AAEfV,YAAAA,OAAO,CAACU,QAAD,CAAP;;AAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAKA,SACI;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KACI;AAAA;AAAA,kDADJ,CADJ,EAII,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KACI;AAAA;AAAA,sCADJ,CAJJ,EAQS,OAAOX,IAAP,KAAgB,QAAjB,GAEI;AAAA;AAAA,KACI;AAAA;AAAA,KAAIA,IAAI,CAACY,KAAT,CADJ,EAEI;AAAA;AAAA,KAAIZ,IAAI,CAACa,KAAT,CAFJ,EAGI;AAAA;AAAA,KAAIb,IAAI,CAACc,WAAT,CAHJ,CAFJ,GAOM;AAAA;AAAA,KAAId,IAAJ,CAfd,EAkBQI,OAAO,IAAI;AAAA;AAAA,KACP,MAAC,MAAD;AACI,IAAA,QAAQ,EAAE,OAAOJ,IAAP,KAAgB,QAD9B;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMM,UAAU,CAACN,IAAI,CAACe,GAAN,CAAhB;AAAA;AAFb,kDADO,EAMP,MAAC,MAAD;AACI,IAAA,OAAO,EAAEV;AADb,KAEK,CAACH,QAAD,GAAY,UAAZ,GAAyB,UAF9B,CANO,CAlBnB,EA+BQA,QAAQ,IAAI,MAAC,IAAD;AAAM,IAAA,OAAO,EAAEO,UAAf;AAA2B,IAAA,EAAE,EAAET,IAAI,CAACe,GAApC;AAAyC,IAAA,KAAK,EAAC;AAA/C,IA/BpB;AAAA;AAAA,yqHADJ;AA+CH,CAnED;;AAoEAjB,IAAI,CAACkB,eAAL,GAAuB,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,4CACZ;AAAEjB,YAAAA,IAAI,EAAEiB,OAAO,CAACC,KAAR,CAAclB;AAAtB,WADY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;;AAGA,eAAeN,UAAU,CAACI,IAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport Router, { withRouter } from 'next/router'\r\nimport { postsApi } from '../src/api/api';\r\nimport { Form } from '../src/Components/form';\r\nimport { Button } from '../src/Components/Button';\r\n\r\nconst View = (props) => {\r\n    const [post, setPost] = useState(props.post)\r\n    const [showForm, setToogleSowForm] = useState(false)\r\n    const isAutor = true\r\n\r\n    const toogleShowForm = () => {\r\n        setToogleSowForm(!showForm)\r\n    }\r\n\r\n\r\n    const deletePost = async (id) => {\r\n        await postsApi.dellPost(id)\r\n        setPost('Пост был удален')\r\n    }\r\n\r\n    const updatePost = async (data) => {\r\n        const response = await postsApi.updatePost(data)\r\n        setPost(response)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Link href=\"/\">\r\n                <a>Главная</a>\r\n            </Link>\r\n            <Link href='/posts'>\r\n                <a>Посты</a>\r\n            </Link>\r\n            {\r\n                (typeof post === 'object')\r\n                    ?\r\n                    <div>\r\n                        <p>{post.title}</p>\r\n                        <p>{post.autor}</p>\r\n                        <p>{post.description}</p>\r\n                    </div>\r\n                    : <p>{post}</p>\r\n            }\r\n            {\r\n                isAutor && <div>\r\n                    <Button\r\n                        disabled={typeof post !== 'object'}\r\n                        onClick={() => deletePost(post._id)}>\r\n                        Удалить\r\n                    </Button>\r\n                    <Button\r\n                        onClick={toogleShowForm}>\r\n                        {!showForm ? 'Изменить' : 'Отменить'}\r\n                    </Button>\r\n                </div>\r\n            }\r\n            {\r\n                showForm && <Form newPost={updatePost} id={post._id} autor='Вася Пупкин' />\r\n            }\r\n<style jsx>{`\r\n\r\na {\r\n  text-decoration: none;\r\n  color: blue;\r\n  margin-right: 5px;\r\n}\r\na:hover {\r\n  opacity: 0.6;\r\n}\r\n`}</style>\r\n        </div>\r\n    )\r\n}\r\nView.getInitialProps = async (context) => {\r\n    return { post: context.query.post }\r\n}\r\nexport default withRouter(View);    "]},"metadata":{},"sourceType":"module"}