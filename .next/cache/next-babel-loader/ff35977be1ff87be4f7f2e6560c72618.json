{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _this = this;\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router';\nimport { postsApi } from '../src/api/api';\n\nvar View = function View(props) {\n  var _useState = useState(props.post),\n      post = _useState[0],\n      setPost = _useState[1];\n\n  deletePost = function deletePost(id) {\n    var response;\n    return _regeneratorRuntime.async(function deletePost$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(postsApi.dellPost(id));\n\n          case 2:\n            response = _context.sent;\n            setPost([]);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  return __jsx(\"div\", null, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", null, \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\")), post.lenght ? __jsx(\"div\", null, __jsx(\"p\", null, post.title), __jsx(\"p\", null, post.autor), __jsx(\"p\", null, post.description)) : __jsx(\"p\", null, \"\\u041F\\u043E\\u0441\\u0442 \\u0431\\u044B\\u043B \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\"), __jsx(\"button\", {\n    onClick: function onClick() {\n      return _this.deletePost(post._id);\n    }\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"), __jsx(Link, {\n    href: \"/posts\"\n  }, __jsx(\"a\", null, \"\\u041F\\u043E\\u0441\\u0442\\u044B\")));\n};\n\nView.getInitialProps = function _callee(context) {\n  return _regeneratorRuntime.async(function _callee$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", {\n            post: context.query.post\n          });\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nexport default withRouter(View);","map":{"version":3,"sources":["D:/Next/next_express/pages/view.js"],"names":["React","useState","useEffect","Link","Router","withRouter","postsApi","View","props","post","setPost","deletePost","id","dellPost","response","lenght","title","autor","description","_id","getInitialProps","context","query"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,IAAiBC,UAAjB,QAAmC,aAAnC;AACA,SAASC,QAAT,QAAyB,gBAAzB;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AAAA,kBACIP,QAAQ,CAACO,KAAK,CAACC,IAAP,CADZ;AAAA,MACbA,IADa;AAAA,MACPC,OADO;;AAIpBC,EAAAA,UAAU,GAAG,oBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACcN,QAAQ,CAACO,QAAT,CAAkBD,EAAlB,CADd;;AAAA;AACHE,YAAAA,QADG;AAETJ,YAAAA,OAAO,CAAC,EAAD,CAAP;;AAFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAKA,SACI,mBACI,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KACI,8DADJ,CADJ,EAIKD,IAAI,CAACM,MAAL,GACK,mBACE,iBAAIN,IAAI,CAACO,KAAT,CADF,EAEE,iBAAIP,IAAI,CAACQ,KAAT,CAFF,EAGE,iBAAIR,IAAI,CAACS,WAAT,CAHF,CADL,GAOG,oGAXR,EAcI;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAM,KAAI,CAACP,UAAL,CAAgBF,IAAI,CAACU,GAArB,CAAN;AAAA;AAAjB,kDAdJ,EAeI,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KACI,kDADJ,CAfJ,CADJ;AAsBH,CA/BD;;AAgCAZ,IAAI,CAACa,eAAL,GAAuB,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,4CACZ;AAAEZ,YAAAA,IAAI,EAAEY,OAAO,CAACC,KAAR,CAAcb;AAAtB,WADY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;;AAGA,eAAeJ,UAAU,CAACE,IAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport Router, { withRouter } from 'next/router'\r\nimport { postsApi } from '../src/api/api';\r\n\r\nconst View = (props) => {\r\n    const [post, setPost] = useState(props.post)\r\n\r\n\r\n    deletePost = async (id) => {\r\n        const response = await postsApi.dellPost(id)\r\n        setPost([])\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Link href=\"/\">\r\n                <a>Главная</a>\r\n            </Link>\r\n            {post.lenght\r\n                ? <div>\r\n                    <p>{post.title}</p>\r\n                    <p>{post.autor}</p>\r\n                    <p>{post.description}</p>\r\n                </div>\r\n                :\r\n                <p>Пост был удален</p>\r\n            }\r\n\r\n            <button onClick={() => this.deletePost(post._id)}>Удалить</button>\r\n            <Link href='/posts'>\r\n                <a>Посты</a>\r\n            </Link>\r\n        </div>\r\n\r\n    )\r\n}\r\nView.getInitialProps = async (context) => {\r\n    return { post: context.query.post }\r\n}\r\nexport default withRouter(View);    "]},"metadata":{},"sourceType":"module"}